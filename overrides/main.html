{% extends "base.html" %}

{% block content %}
{% if page.nb_url %}
    {# Take the second-to-last segment: tutorial_name from page.nb_url #}
    {% set tutorial_name = page.nb_url.split('/')[-2] %}

    {# Google Colab link to the notebook in the repo #}
    {% set colab_href =
        "https://colab.research.google.com/github/easyscience/diffraction-lib/blob/gh_pages/tutorials/" ~
        tutorial_name ~ "/" ~ tutorial_name ~ ".ipynb" %}
    <a href="{{ colab_href }}" title="Open in Google Colab" class="md-content__button md-icon">
        {% include ".icons/google-colab.svg" %}
    </a>

    {# Direct download from gh_pages (raw) #}
    {# href="{{ page.nb_url }}" doesn't work for easyscience.github.io as generates
       https://easyscience.github.io/lib/tutorials/TUTORIAL_NAME/TUTORIAL_NAME.ipynb
       instead of
       https://easyscience.github.io/diffraction-lib/tutorials/TUTORIAL_NAME/TUTORIAL_NAME.ipynb
       So, let's use the links to the gh_pages branch. #}
    {% set download_href =
        "https://raw.githubusercontent.com/easyscience/diffraction-lib/gh_pages/tutorials/" ~
        tutorial_name ~ "/" ~ tutorial_name ~ ".ipynb" %}
    <a href="{{ download_href }}" title="Download Notebook" class="md-content__button md-icon">
        {% include ".icons/material/download.svg" %}
    </a>
{% endif %}

{{ super() }}
{% endblock content %}
